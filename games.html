<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Games | Smart Learning Kids</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#1d4ed8">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-800 font-sans">
  <header class="sticky top-0 z-50 bg-white shadow-md">
    <nav class="max-w-6xl mx-auto flex justify-between items-center p-4">
      <h1 class="text-2xl font-bold text-blue-600">Smart Learning Kids</h1>
      <div class="space-x-4 hidden md:flex">
        <a href="index.html">Home</a>
        <a href="lessons.html">Lessons</a>
        <a href="games.html" class="text-blue-600 font-semibold">Games</a>
        <a href="quizzes.html">Quizzes</a>
        <a href="worksheets.html">Worksheets</a>
        <a href="about.html">About</a>
        <a href="contact.html">Contact</a>
      </div>
    </nav>
  </header>

  <main class="max-w-5xl mx-auto py-12 px-6 text-center">
    <h2 class="text-4xl font-bold mb-6">ðŸŽ® Games</h2>
    <p class="text-lg mb-8">Play typing, mouse, keyboard, and color games.</p>
    
    <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
      <a href="#" class="bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition block">
        <h3 class="text-xl font-bold mb-2">Typing Game</h3>
        <p>Type words quickly to score points.</p>
      </a>
      <a href="#" class="bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition block">
        <h3 class="text-xl font-bold mb-2">Mouse Game</h3>
        <p>Click the targets before time runs out!</p>
      </a>
      <a href="#" class="bg-white p-6 rounded-2xl shadow-md hover:shadow-xl transition block">
        <h3 class="text-xl font-bold mb-2">Color Game</h3>
        <p>Match colors and shapes for fun learning.</p>
      </a>
    </div>
  </main>

  <footer class="bg-white shadow-inner text-center py-6 mt-10">
    <p class="text-lg">&copy; 2025 Smart Learning Kids. All rights reserved.</p>
  </footer>

  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', async () => {
      try {
        const reg = await navigator.serviceWorker.register('/service-worker.js');
        console.log('Service worker registered:', reg);

        // Listen for updates to the Service Worker.
        reg.addEventListener('updatefound', () => {
          const newWorker = reg.installing;
          console.log('New service worker found:', newWorker);

          newWorker.addEventListener('statechange', () => {
            if (newWorker.state === 'installed') {
              // If there's an existing controller, that means the new SW is waiting to activate
              if (navigator.serviceWorker.controller) {
                // Notify the user: new version available
                // You can replace this with a custom UI prompt
                showUpdateUI(newWorker, reg);
              } else {
                console.log('Content cached for offline use.');
              }
            }
          });
        });

        // Check if a new SW is waiting right now (e.g., after page reload)
        if (reg.waiting) {
          showUpdateUI(reg.waiting, reg);
        }
      } catch (err) {
        console.error('SW registration failed:', err);
      }
    });
  }

  function showUpdateUI(worker, registration) {
    // Basic prompt - replace with nice banner or toast in your UI
    const banner = document.createElement('div');
    banner.style = 'position:fixed;bottom:18px;left:18px;right:18px;padding:12px;background:#0ea5e9;color:#fff;border-radius:10px;box-shadow:0 8px 30px rgba(2,6,23,.12);display:flex;justify-content:space-between;align-items:center;z-index:9999;';
    banner.innerHTML = '<div style="font-weight:700">Update available</div>';
    const btn = document.createElement('button');
    btn.textContent = 'Refresh';
    btn.style = 'background:#fff;color:#0ea5e9;padding:8px 12px;border-radius:8px;border:none;font-weight:700;cursor:pointer;margin-left:12px;';
    btn.onclick = () => {
      // Ask SW to skipWaiting -> will activate immediately
      worker.postMessage({ type: 'SKIP_WAITING' });
      // After skipWaiting, reload to use the new SW + cached assets
      registration.waiting?.postMessage({ type: 'SKIP_WAITING' });
      setTimeout(() => window.location.reload(true), 500);
    };
    banner.appendChild(btn);
    document.body.appendChild(banner);
  }
</script>
</body>
</html>
